{"ast":null,"code":"import{useEffect,useRef,useState}from'react';import'./WordRush.css';import'../App.css';import data from'./words.json';import{WordCard}from'./wordCard';import{PopupRolesWordRush,PopupGameEnd}from'../PopUps/popup';import{UpdateWordRushGameScore}from'../db/firebase';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";let phasers=0;let currentPhaser=[];let themeSelect=\"\";const TimeToDestroyWords=5600;function selectRandomTheme(){const obj=Object.keys(data.themes);const themeIndex=Math.floor(Math.random()*obj.length);const theme=obj[themeIndex];return theme;}function getNextWords(theme){if(phasers>=Object.keys(theme).length)return undefined;if(currentPhaser.length===0&&phasers<Object.keys(theme).length-1){phasers++;currentPhaser=theme[phasers].phasers.split(\" \");}return currentPhaser.shift();}export function WordsContainer(){const[words,setWords]=useState([]);const[playerInput,setPlayerInput]=useState(\"\");const[popupState,setPopupState]=useState(true);const[updateWords,setUpdateWords]=useState(0);const[score,setScore]=useState(0);const[finished,setFinished]=useState(false);const[save,setSave]=useState(false);const inputRef=useRef(null);if(themeSelect===\"\")themeSelect=selectRandomTheme();useEffect(()=>{const update=setInterval(()=>setUpdateWords(prev=>prev+1),500);return()=>clearInterval(update);},[]);useEffect(()=>{var _inputRef$current;if(popupState){phasers=0;currentPhaser=[];return;}(_inputRef$current=inputRef.current)===null||_inputRef$current===void 0?void 0:_inputRef$current.focus();const spawn=setInterval(()=>{const word=getNextWords(data.themes[themeSelect]);setWords(prev=>[...prev,{\"word\":word,\"right\":Math.floor(Math.random()*40)+5,\"createAt\":Date.now()}]);},1000);return()=>clearInterval(spawn);},[popupState]);useEffect(()=>{setWords(words.filter(x=>Date.now()-x.createAt<TimeToDestroyWords));},[updateWords]);useEffect(()=>{if(words.length===0)return;const first=words[0];if(first.word===undefined)setFinished(true);},[words]);useEffect(()=>{if(!words[0]||!words[0].word)return;if(playerInput.toLowerCase()!==words[0].word.toLowerCase())return;setPlayerInput(\"\");setWords(words.slice(1));setScore(score+100);},[playerInput,words]);if(popupState)return/*#__PURE__*/_jsx(PopupRolesWordRush,{setState:setPopupState});if(finished){if(!save){UpdateWordRushGameScore(score);setSave(true);}return/*#__PURE__*/_jsx(PopupGameEnd,{});}return/*#__PURE__*/_jsxs(\"div\",{className:\"GamePage\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"WordsContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"NoteBookContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"RingsContainer\",children:Array(Math.floor(window.innerWidth/2*0.45/45)).fill(null).map(x=>/*#__PURE__*/_jsx(\"div\",{className:\"Ring\"}))}),/*#__PURE__*/_jsx(\"div\",{className:\"Page\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:\"Score:\"}),\" \",String(score).padStart(3,\"0\"),\" \"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"WordCascade\",children:words.map(x=>/*#__PURE__*/_jsx(WordCard,{Word:x.word,posX:x.right},x.createAt))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"PlayerInputContainer\",children:/*#__PURE__*/_jsx(\"input\",{className:\"PlayerInput\",ref:inputRef,type:\"text\",value:playerInput,onChange:event=>setPlayerInput(event.target.value),placeholder:\"Write here\"})})]});}","map":{"version":3,"names":["useEffect","useRef","useState","data","WordCard","PopupRolesWordRush","PopupGameEnd","UpdateWordRushGameScore","jsx","_jsx","jsxs","_jsxs","phasers","currentPhaser","themeSelect","TimeToDestroyWords","selectRandomTheme","obj","Object","keys","themes","themeIndex","Math","floor","random","length","theme","getNextWords","undefined","split","shift","WordsContainer","words","setWords","playerInput","setPlayerInput","popupState","setPopupState","updateWords","setUpdateWords","score","setScore","finished","setFinished","save","setSave","inputRef","update","setInterval","prev","clearInterval","_inputRef$current","current","focus","spawn","word","Date","now","filter","x","createAt","first","toLowerCase","slice","setState","className","children","Array","window","innerWidth","fill","map","String","padStart","Word","posX","right","ref","type","value","onChange","event","target","placeholder"],"sources":["L:/Bacon/src/WordRush/WordRush.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react'\r\nimport './WordRush.css'\r\nimport '../App.css'\r\nimport data from './words.json'\r\nimport { WordCard } from './wordCard'\r\nimport { PopupRolesWordRush, PopupGameEnd } from '../PopUps/popup'\r\nimport { UpdateWordRushGameScore } from '../db/firebase'\r\nlet phasers = 0\r\nlet currentPhaser = []\r\nlet themeSelect = \"\"\r\nconst TimeToDestroyWords = 5600\r\n\r\nfunction selectRandomTheme(){\r\n    const obj = Object.keys(data.themes)\r\n    const themeIndex = Math.floor(Math.random() * obj.length)\r\n    const theme = obj[themeIndex]\r\n    return theme\r\n}\r\n\r\nfunction getNextWords(theme){\r\n    if (phasers >= Object.keys(theme).length) return undefined\r\n    if (currentPhaser.length === 0 && phasers < Object.keys(theme).length - 1){\r\n        phasers++\r\n        currentPhaser = theme[phasers].phasers.split(\" \")\r\n    }\r\n    return currentPhaser.shift()\r\n}\r\n\r\nexport function WordsContainer(){\r\n    const [words,setWords] = useState([])\r\n    const [playerInput,setPlayerInput] = useState(\"\")\r\n    const [popupState, setPopupState] = useState(true)\r\n    const [updateWords, setUpdateWords] = useState(0)\r\n    const [score, setScore] = useState(0)\r\n    const [finished, setFinished] = useState(false)\r\n    const [save, setSave] = useState(false)\r\n    const inputRef = useRef(null)\r\n\r\n    if (themeSelect === \"\") themeSelect = selectRandomTheme()\r\n    \r\n    useEffect(() => {\r\n        const update = setInterval(() => setUpdateWords(prev => prev + 1),500)\r\n        return () => clearInterval(update)\r\n    },[])\r\n    \r\n    useEffect(() => {\r\n            if (popupState){\r\n                phasers = 0\r\n                currentPhaser = []\r\n                return\r\n            }\r\n            inputRef.current?.focus()\r\n            const spawn = setInterval(() => {\r\n                const word = getNextWords(data.themes[themeSelect])\r\n                setWords(prev => [...prev,{ \"word\": word, \"right\": (Math.floor(Math.random() * 40) + 5), \"createAt\": Date.now()}])\r\n            },1000)\r\n            return () => clearInterval(spawn)\r\n        }\r\n    ,[popupState])\r\n\r\n    useEffect(() => {setWords(words.filter((x) => Date.now() - x.createAt < TimeToDestroyWords))},[updateWords])\r\n    useEffect(() => {\r\n        if (words.length === 0) return\r\n        const first = words[0]\r\n        if (first.word === undefined) setFinished(true)\r\n    },[words])\r\n\r\n    useEffect(() => {\r\n        if (!words[0] || !words[0].word) return\r\n        if (playerInput.toLowerCase() !== words[0].word.toLowerCase()) return\r\n        setPlayerInput(\"\")\r\n        setWords(words.slice(1))\r\n        setScore(score + 100)\r\n    },[playerInput,words])\r\n\r\n    if (popupState) return <PopupRolesWordRush setState={setPopupState}/>\r\n    if (finished){\r\n        if (!save){\r\n            UpdateWordRushGameScore(score)\r\n            setSave(true)\r\n        }\r\n        return <PopupGameEnd/>\r\n    }\r\n    return (\r\n        <div className='GamePage'>\r\n            <div className='WordsContainer'>\r\n                <div className='NoteBookContainer'>\r\n                    <div className='RingsContainer'>\r\n                        {\r\n                            Array(Math.floor(((window.innerWidth/2) * 0.45)/45)).fill(null).map((x) => <div className='Ring'></div>)\r\n                        }\r\n                    </div>\r\n                    <div className='Page'>\r\n                        <span> <strong>Score:</strong> {String(score).padStart(3,\"0\")} </span>\r\n                    </div>\r\n                </div>\r\n                <div className='WordCascade'>\r\n                    {\r\n                        words.map((x) => <WordCard key={x.createAt} Word={x.word} posX={x.right} />)\r\n                    }\r\n                </div>\r\n            </div>\r\n            <div className='PlayerInputContainer'>\r\n                <input className='PlayerInput'\r\n                    ref={inputRef}\r\n                    type='text'\r\n                    value={playerInput}\r\n                    onChange={(event) => setPlayerInput(event.target.value)}\r\n                    placeholder='Write here'\r\n                ></input>\r\n            </div>\r\n        </div>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}