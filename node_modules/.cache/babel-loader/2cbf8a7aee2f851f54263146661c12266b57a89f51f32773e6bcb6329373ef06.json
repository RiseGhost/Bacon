{"ast":null,"code":"// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getDatabase, ref, set, get, push, update } from \"firebase/database\";\nimport { WordRushGameObject } from \"./WordRushGameObject.js\";\nimport { MatchGameDataObject } from \"./MatchGameDataObject.js\";\nimport Cookies from \"js-cookie\";\nimport { UpdateMiniGameDataObject } from \"./MiniGameDataObject.js\";\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDGF3-zASzVYB55mIlv4hePRCRZ0XBQ9no\",\n  authDomain: \"bacon-hub.firebaseapp.com\",\n  databaseURL: \"https://bacon-hub-default-rtdb.europe-west1.firebasedatabase.app\",\n  projectId: \"bacon-hub\",\n  storageBucket: \"bacon-hub.firebasestorage.app\",\n  messagingSenderId: \"609840217142\",\n  appId: \"1:609840217142:web:c338dd01b0851c35adec97\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst db = getDatabase(app);\nexport function CreateUserDataObject(name, password) {\n  const user = {\n    name: name,\n    password: password,\n    wordrush: WordRushGameObject(),\n    match: MatchGameDataObject()\n  };\n  return user;\n}\n_c = CreateUserDataObject;\nexport async function UserExist(name) {\n  try {\n    const table = ref(db, \"users\");\n    const snapshot = await get(table);\n    if (!snapshot.exists) return false;\n    const user = snapshot.val();\n    const exist = Object.values(user).some(u => u.name === name);\n    return exist;\n  } catch (err) {\n    console.log({\n      error: err.message\n    });\n    return undefined;\n  }\n}\n_c2 = UserExist;\nexport async function getUser(name, password) {\n  try {\n    const table = ref(db, \"users\");\n    const snapshot = await get(table);\n    const users = snapshot.val();\n    for (const [id, user] of Object.entries(users)) {\n      if (user.name === name && user.password === password) {\n        return {\n          id,\n          ...user\n        };\n      }\n    }\n    return undefined;\n  } catch (err) {\n    console.log({\n      error: err.message\n    });\n  }\n}\nexport async function UpdateMatchGameScore(score) {\n  try {\n    const cookieUser = Cookies.get(\"user\");\n    if (cookieUser === undefined || cookieUser === \"\") return false;\n    const userSave = JSON.parse(cookieUser);\n    const user = await getUser(userSave.name, userSave.password);\n    const userRef = ref(db, \"users/\" + user.id + \"/match\");\n    await update(userRef, UpdateMiniGameDataObject(user.match, score));\n    console.log(\"Update MatchGame Score with success\");\n    return true;\n  } catch (err) {\n    console.log({\n      error: err.message\n    });\n    return false;\n  }\n}\n_c3 = UpdateMatchGameScore;\nexport async function UpdateWordRushGameScore(score, LostWordStatus) {\n  try {\n    const cookieUser = Cookies.get(\"user\");\n    if (cookieUser === undefined || cookieUser === \"\") return false;\n    const userSave = JSON.parse(cookieUser);\n    const user = await getUser(userSave.name, userSave.password);\n    const userRef = ref(db, \"users/\" + user.id + \"/wordrush\");\n    const data = UpdateMiniGameDataObject(user.wordrush, score, {\n      LostWordStatus: LostWordStatus\n    });\n    await update(userRef, {\n      ...data,\n      LostWordStatus: LostWordStatus\n    });\n    console.log(\"Update WordRush Score with success\");\n  } catch (err) {\n    console.log({\n      error: err.message\n    });\n    return false;\n  }\n}\n_c4 = UpdateWordRushGameScore;\nexport async function CreateNewUser(user) {\n  try {\n    console.log(user);\n    if (user.name === undefined || user.name === \"\" || user.name.length === 0) {\n      alert(\"Name con not be null\");\n      return false;\n    }\n    const exist = await UserExist(user.name);\n    if (exist) {\n      alert(\"This Nick Name was register\");\n      console.log(\"This user exist\");\n      return false;\n    }\n    const table = ref(db, \"users\");\n    await push(table, user);\n    return true;\n  } catch (err) {\n    console.log({\n      error: err.message\n    });\n    return false;\n  }\n}\n_c5 = CreateNewUser;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"CreateUserDataObject\");\n$RefreshReg$(_c2, \"UserExist\");\n$RefreshReg$(_c3, \"UpdateMatchGameScore\");\n$RefreshReg$(_c4, \"UpdateWordRushGameScore\");\n$RefreshReg$(_c5, \"CreateNewUser\");","map":{"version":3,"names":["initializeApp","getDatabase","ref","set","get","push","update","WordRushGameObject","MatchGameDataObject","Cookies","UpdateMiniGameDataObject","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","app","db","CreateUserDataObject","name","password","user","wordrush","match","_c","UserExist","table","snapshot","exists","val","exist","Object","values","some","u","err","console","log","error","message","undefined","_c2","getUser","users","id","entries","UpdateMatchGameScore","score","cookieUser","userSave","JSON","parse","userRef","_c3","UpdateWordRushGameScore","LostWordStatus","data","_c4","CreateNewUser","length","alert","_c5","$RefreshReg$"],"sources":["L:/Bacon/src/db/firebase.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getDatabase, ref, set, get, push, update } from \"firebase/database\";\r\nimport { WordRushGameObject } from \"./WordRushGameObject.js\";\r\nimport { MatchGameDataObject } from \"./MatchGameDataObject.js\";\r\nimport Cookies from \"js-cookie\";\r\nimport { UpdateMiniGameDataObject } from \"./MiniGameDataObject.js\";\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDGF3-zASzVYB55mIlv4hePRCRZ0XBQ9no\",\r\n  authDomain: \"bacon-hub.firebaseapp.com\",\r\n  databaseURL: \"https://bacon-hub-default-rtdb.europe-west1.firebasedatabase.app\",\r\n  projectId: \"bacon-hub\",\r\n  storageBucket: \"bacon-hub.firebasestorage.app\",\r\n  messagingSenderId: \"609840217142\",\r\n  appId: \"1:609840217142:web:c338dd01b0851c35adec97\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getDatabase(app)\r\n\r\nexport function CreateUserDataObject(name, password){\r\n    const user = {\r\n        name: name,\r\n        password: password,\r\n        wordrush: WordRushGameObject(),\r\n        match: MatchGameDataObject()\r\n    }\r\n    return user\r\n}\r\n\r\nexport async function UserExist(name){\r\n    try{\r\n        const table = ref(db,\"users\")\r\n        const snapshot = await get(table)\r\n\r\n        if (!snapshot.exists) return false\r\n\r\n        const user = snapshot.val()\r\n\r\n        const exist = Object.values(user).some((u) => u.name === name)\r\n\r\n        return exist\r\n    } catch(err){\r\n        console.log({error: err.message})\r\n        return undefined\r\n    }\r\n}\r\n\r\nexport async function getUser(name, password) {\r\n    try{\r\n        const table = ref(db,\"users\")\r\n        const snapshot = await get(table)\r\n        const users = snapshot.val()\r\n        for(const [id,user] of Object.entries(users)){\r\n            if (user.name === name && user.password === password){\r\n                return {id, ...user}\r\n            }\r\n        }\r\n        return undefined\r\n    } catch(err){\r\n        console.log({error: err.message})\r\n    }\r\n}\r\n\r\nexport async function UpdateMatchGameScore(score){\r\n    try{\r\n        const cookieUser = Cookies.get(\"user\")\r\n        if (cookieUser === undefined || cookieUser === \"\") return false\r\n        const userSave = JSON.parse(cookieUser)\r\n        const user = await getUser(userSave.name, userSave.password)\r\n        const userRef = ref(db,\"users/\" + user.id + \"/match\")\r\n        await update(userRef, UpdateMiniGameDataObject(user.match,score))\r\n        console.log(\"Update MatchGame Score with success\")\r\n        return true\r\n    } catch(err){\r\n        console.log({error: err.message})\r\n        return false\r\n    }\r\n}\r\n\r\nexport async function UpdateWordRushGameScore(score, LostWordStatus) {\r\n    try{\r\n        const cookieUser = Cookies.get(\"user\")\r\n        if (cookieUser === undefined || cookieUser === \"\") return false\r\n        const userSave = JSON.parse(cookieUser)\r\n        const user = await getUser(userSave.name, userSave.password)\r\n        const userRef = ref(db,\"users/\" + user.id + \"/wordrush\")\r\n        const data = UpdateMiniGameDataObject(user.wordrush,score,{LostWordStatus: LostWordStatus})\r\n        await update(userRef, {...data,LostWordStatus: LostWordStatus})\r\n        console.log(\"Update WordRush Score with success\")\r\n    } catch(err){\r\n        console.log({error: err.message})\r\n        return false\r\n    }\r\n}\r\n\r\nexport async function CreateNewUser(user){\r\n    try{\r\n        console.log(user)\r\n        if (user.name === undefined || user.name === \"\" || user.name.length === 0){\r\n            alert(\"Name con not be null\")\r\n            return false\r\n        }\r\n        const exist = await UserExist(user.name)\r\n        if (exist){\r\n            alert(\"This Nick Name was register\")\r\n            console.log(\"This user exist\")\r\n            return false\r\n        }\r\n        const table = ref(db,\"users\")\r\n        await push(table,user)\r\n        return true\r\n    } catch(err){\r\n        console.log({error: err.message})\r\n        return false\r\n    }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}